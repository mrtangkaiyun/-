(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fe89a9ae"],{"21a3":function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"f",(function(){return o})),a.d(e,"b",(function(){return r})),a.d(e,"d",(function(){return s})),a.d(e,"a",(function(){return c})),a.d(e,"g",(function(){return d})),a.d(e,"e",(function(){return u}));var i=a("b775"),l="/skill/masterAndApprentice";function n(t){return Object(i["b"])({url:"".concat(l,"/list"),method:"get",params:t})}function o(t){return Object(i["b"])({url:"".concat(l,"/deleteById"),method:"get",params:t})}function r(t){return Object(i["b"])({url:"".concat(l,"/importExcel"),method:"post",data:t,headers:{"Content-Type":"multipart/form-data"}})}function s(t){return Object(i["b"])({url:"".concat(l,"/queryInfo?id=").concat(t),method:"get"})}function c(t){return Object(i["b"])({url:"".concat(l,"/add"),method:"post",data:t})}function d(t){return Object(i["b"])({url:"".concat(l,"/update"),method:"post",data:t})}function u(t){return Object(i["b"])({url:"".concat(l,"/queryStuTea"),method:"get",params:t})}},e116:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-header-wrapper",[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("search-bar",{ref:"searchbar",attrs:{data:t.searchData},on:{search:t.clickSearch,import:t.importFile,add:t.clickAdd}}),a("a-table",{attrs:{columns:t.columns,dataSource:t.table.data,rowKey:"id",size:t.table.size,loading:t.table.loading,pagination:t.pagination,scroll:{x:900}},on:{change:t.handleTabChange},scopedSlots:t._u([{key:"index",fn:function(e,a,i){return[t._v(" "+t._s(i+1)+" ")]}},{key:"action",fn:function(e,i){return a("span",{},[a("a-button",{attrs:{type:"primary",shape:"circle",icon:"form"},on:{click:function(e){return t.clickUpdate(i)}}}),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{type:"primary",shape:"circle",icon:"menu"},on:{click:function(e){return t.clickListRecord(i)}}}),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{type:"primary",shape:"circle",icon:"info"},on:{click:function(e){return t.clickDetail(i)}}}),a("a-divider",{attrs:{type:"vertical"}}),a("popconfirm-button",{attrs:{custom:"",data:i},on:{click:t.clickDelete}},[a("a-button",{attrs:{type:"danger",shape:"circle",icon:"delete"}})],1)],1)}}])})],1)]),t.add.visiable?a("add",{attrs:{data:t.add.data},on:{add:t.refresh,edit:t.fetchData},model:{value:t.add.visiable,callback:function(e){t.$set(t.add,"visiable",e)},expression:"add.visiable"}}):t._e(),t.listObj.visiable?a("list-modal",{attrs:{data:t.listObj.data},on:{add:t.refresh,edit:t.fetchData},model:{value:t.listObj.visiable,callback:function(e){t.$set(t.listObj,"visiable",e)},expression:"listObj.visiable"}}):t._e(),a("a-upload",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"upxlsx",attrs:{name:"file",multiple:!0,customRequest:t.customRequest,accept:".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v("Click to Upload ")],1)],1)],1)},l=[],n=a("6a8e"),o=[{title:"序号",dataIndex:"index",width:80,scopedSlots:{customRender:"index"}},{title:"员工编号",dataIndex:"number",width:120,key:"number"},{title:"姓名",dataIndex:"name",width:100,key:"name"},{title:"所属单位",dataIndex:"companyName",width:160,key:"companyName"},{title:"学历",dataIndex:"education",width:100,key:"education"},{title:"专业技术资格",dataIndex:"technicalName",width:90,key:"technicalName"},{title:"技能等级名",dataIndex:"skillLevelName",width:120,key:"skillLevelName"},{title:"师徒状态",dataIndex:"state",width:120,key:"state"},{title:"操作",key:"action",fixed:"right",width:240,scopedSlots:{customRender:"action"}}],r=[[{type:"input",key:"name",label:"姓名",placeholder:"请输入姓名"},{type:"select",key:"company",label:"所属单位",placeholder:"请选择",options:n["c"]},{type:"select",key:"status",label:"师徒状态",placeholder:"请选择",options:[{label:"空闲 ",value:"1"},{label:"带徒中",value:"2"}]},{type:"search",name:"查询"},{type:"reset",name:"重置"}],[{type:"add",name:"新增"},{type:"import",name:"导入"}]],s=[{title:"序号",dataIndex:"index",width:80,scopedSlots:{customRender:"index"}},{title:"姓名",dataIndex:"name",width:80,key:"name"},{title:"所属单位",dataIndex:"companyName",width:120,key:"companyName"},{title:"学历",dataIndex:"education",width:80,key:"education"},{title:"配对日期",dataIndex:"foundTime",width:100,key:"foundTime"},{title:"师徒状态",dataIndex:"isGraduation",width:80,key:"isGraduation"}],c=a("21a3"),d=a("5ff1"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{staticClass:"page-modal",attrs:{afterClose:t.closeDialog,title:t.dialog.title,footer:null,keyboard:!1,maskClosable:!1,width:"800px"},model:{value:t.dialog.visiable,callback:function(e){t.$set(t.dialog,"visiable",e)},expression:"dialog.visiable"}},[a("div",[a("a-table",{attrs:{columns:t.columns,dataSource:t.table.data,rowKey:"id",size:t.table.size,loading:t.table.loading,scroll:{x:600}},scopedSlots:t._u([{key:"index",fn:function(e,a,i){return[t._v(" "+t._s(i+1)+" ")]}}])})],1)])],1)},m=[],p=a("ffcb"),f={mixins:[p["a"],d["a"]],data:function(){return{columns:s}},created:function(){var t="徒弟列表";this.$setKeyValue(this.dialog,{title:t,visiable:!0}),this.fetchInfo()},methods:{valueToLabelOption:n["i"],fetchInfo:function(){var t=this,e=this.data.obj,a={id:e.id,type:2};Object(c["e"])(a).then((function(e){var a=e.code,i=e.data;0===a&&(t.table.data=i)}))}}},b=f,h=a("2877"),v=Object(h["a"])(b,u,m,!1,null,"46e55dba",null),k=v.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{staticClass:"page-modal",attrs:{afterClose:t.closeDialog,title:t.dialog.title,footer:null,keyboard:!1,maskClosable:!1,width:"1300px"},model:{value:t.dialog.visiable,callback:function(e){t.$set(t.dialog,"visiable",e)},expression:"dialog.visiable"}},[a("a-form-model",{ref:"form",attrs:{model:t.formInit,loading:"","wrapper-col":{span:23}}},[a("a-row",[a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"员工编号",prop:"number",rules:t.rules.input}},[a("a-input",{attrs:{disabled:t.isDetail,placeholder:"请输入"},model:{value:t.formInit.number,callback:function(e){t.$set(t.formInit,"number",e)},expression:"formInit.number"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"姓名",prop:"name",rules:t.rules.input}},[a("a-input",{attrs:{disabled:t.isDetail,placeholder:"请输入"},model:{value:t.formInit.name,callback:function(e){t.$set(t.formInit,"name",e)},expression:"formInit.name"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"所属单位",prop:"company",rules:t.rules.select}},[a("a-select",{attrs:{disabled:t.isDetail,placeholder:"请选择"},model:{value:t.formInit.company,callback:function(e){t.$set(t.formInit,"company",e)},expression:"formInit.company"}},t._l(t.companyOptions,(function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"所属部门",prop:"departmentId"}},[a("a-input",{attrs:{disabled:t.isDetail,placeholder:"请输入"},model:{value:t.formInit.departmentId,callback:function(e){t.$set(t.formInit,"departmentId",e)},expression:"formInit.departmentId"}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"所属岗位",prop:"post"}},[a("a-input",{attrs:{disabled:t.isDetail,placeholder:"请输入"},model:{value:t.formInit.post,callback:function(e){t.$set(t.formInit,"post",e)},expression:"formInit.post"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"身份证号",prop:"idCard",rules:[{required:!1},{min:16,max:18,message:"身份证长度不正确"}]}},[a("a-input",{attrs:{disabled:t.isDetail,placeholder:"请输入"},model:{value:t.formInit.idCard,callback:function(e){t.$set(t.formInit,"idCard",e)},expression:"formInit.idCard"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"性别",prop:"sex"}},[a("a-select",{attrs:{disabled:t.isDetail,placeholder:"请选择"},model:{value:t.formInit.sex,callback:function(e){t.$set(t.formInit,"sex",e)},expression:"formInit.sex"}},t._l(t.sexOptions,(function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"民族",prop:"nation"}},[a("a-select",{attrs:{disabled:t.isDetail,placeholder:"请选择"},model:{value:t.formInit.nation,callback:function(e){t.$set(t.formInit,"nation",e)},expression:"formInit.nation"}},t._l(t.nationOptions,(function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"出生日期",prop:"birthday"}},[a("a-date-picker",{attrs:{disabled:t.isDetail},model:{value:t.formInit.birthday,callback:function(e){t.$set(t.formInit,"birthday",e)},expression:"formInit.birthday"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"政治面貌",prop:"politicalOutlook"}},[a("a-select",{attrs:{disabled:t.isDetail,placeholder:"请选择"},model:{value:t.formInit.politicalOutlook,callback:function(e){t.$set(t.formInit,"politicalOutlook",e)},expression:"formInit.politicalOutlook"}},t._l(t.faceOptions,(function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"学历",prop:"education",rules:t.rules.select}},[a("a-select",{attrs:{disabled:t.isDetail,placeholder:"请选择"},model:{value:t.formInit.education,callback:function(e){t.$set(t.formInit,"education",e)},expression:"formInit.education"}},t._l(t.recordOptions,(function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"手机",prop:"phone"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{disabled:t.isDetail,placeholder:"请输入",min:0},model:{value:t.formInit.phone,callback:function(e){t.$set(t.formInit,"phone",e)},expression:"formInit.phone"}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"电子邮箱",prop:"email"}},[a("a-input",{attrs:{disabled:t.isDetail,placeholder:"请输入"},model:{value:t.formInit.email,callback:function(e){t.$set(t.formInit,"email",e)},expression:"formInit.email"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"参加工作时间",prop:"workingTime"}},[a("a-date-picker",{attrs:{disabled:t.isDetail},model:{value:t.formInit.workingTime,callback:function(e){t.$set(t.formInit,"workingTime",e)},expression:"formInit.workingTime"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"专业技术资格名称",prop:"technicalId"}},[a("a-select",{attrs:{disabled:t.isDetail,placeholder:"请选择"},model:{value:t.formInit.technicalId,callback:function(e){t.$set(t.formInit,"technicalId",e)},expression:"formInit.technicalId"}},t._l(t.cardOneOptions,(function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"技能等级名称",prop:"skillLevelId"}},[a("a-select",{attrs:{disabled:t.isDetail,placeholder:"请选择"},model:{value:t.formInit.skillLevelId,callback:function(e){t.$set(t.formInit,"skillLevelId",e)},expression:"formInit.skillLevelId"}},t._l(t.cardTwoOptions,(function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"技其它资格名称",prop:"other"}},[a("a-input",{attrs:{disabled:t.isDetail,placeholder:"请输入"},model:{value:t.formInit.other,callback:function(e){t.$set(t.formInit,"other",e)},expression:"formInit.other"}})],1)],1)],1),t.isDetail?t._e():a("div",{staticClass:"text-center"},[a("a-button",{on:{click:t.closeDialog}},[t._v(" 取消 ")]),a("a-button",{staticClass:"margin-l-20",attrs:{type:"primary",loading:t.button.loading},on:{click:t.handleSubmit}},[t._v("保存")])],1)],1)],1)],1)},I=[],g=a("5530"),x=a("c1df"),w=a.n(x),O=a("4fb8"),D={mixins:[p["a"],O["a"]],data:function(){return{cardOneOptions:n["a"],cardTwoOptions:n["b"],companyOptions:n["c"],sexOptions:n["h"],nationOptions:n["f"],faceOptions:n["d"],recordOptions:n["g"],classOptions:[],formInit:{isType:"师傅",number:null,name:null,company:null,departmentId:null,post:null,idCard:null,sex:null,nation:null,birthday:null,politicalOutlook:null,education:null,phone:null,email:null,workingTime:null,technicalId:null,skillLevelId:null,other:null}}},computed:{isDetail:function(){var t=this.data.type;return"detail"===t}},created:function(){var t=this.data.type,e="add"===t?"师傅新增":"edit"===t?"师傅修改":"师傅详情";this.$setKeyValue(this.dialog,{title:e,visiable:!0}),"edit"!==t&&"detail"!==t||this.fetchInfo()},methods:{fetchInfo:function(){var t=this,e=this.data.obj;Object(c["d"])(e.id).then((function(e){var a=e.code,i=e.data;0===a&&(t.originalData=t.$copy(i),t.$setOriginalKV(t.formInit,i))}))},handleSubmit:function(t){var e=this;t.preventDefault(),this.$refs.form.validate((function(t){if(t){var a=e.data,i=a.type,l=a.obj,n=Object(g["a"])({},e.formInit);if(n.birthday=n.birthday?w()(n.birthday).format("YYYY-MM-DD"):n.birthday,n.workingTime=n.workingTime?w()(n.workingTime).format("YYYY-MM-DD"):n.workingTime,"edit"===i&&e.$compareObjValue(e.originalData,n))return void e.$message.warning("数据没有任何修改");e.$setKeyValue(e.button,{loading:!0,text:"提交中"}),"edit"===i?(n.id=l.id,Object(c["g"])(n).then((function(t){return e.process(t)}))):Object(c["a"])(n).then((function(t){return e.process(t)}))}else e.$message.warning("请完善上面必填信息")}))}}},$=D,_=Object(h["a"])($,y,I,!1,null,"8ff65396",null),j=_.exports,T={name:"Master",mixins:[d["a"]],components:{Add:j,ListModal:k},data:function(){return{columns:o,searchData:r,listObj:{visiable:!1,data:null}}},created:function(){this.fetchData()},methods:{valueToLabelOption:n["i"],fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.table.loading){var a=this.pagination,i=a.current,l=a.pageSize;e.pageNum=i,e.pageSize=l,e.isType="师傅",this.table.loading=!0,Object(c["c"])(e).then((function(e){var a=e.code,i=e.data;t.table.loading=!1,0===a&&(t.pagination.total=i.total,t.table.data=i.rows)}))}},clickDelete:function(t){var e=this,a={id:t.id,number:t.number};Object(c["f"])(a).then((function(t){var a=t.code;0===a&&(e.$message.success("删除成功"),e.conditionPage(),e.fetchData(e.params))}))},clickDetail:function(t){this.$setKeyValue(this.add,{visiable:!0,data:{type:"detail",obj:t}})},clickListRecord:function(t){this.$setKeyValue(this.listObj,{visiable:!0,data:{type:"list",obj:t}})},importFile:function(){this.$refs["upxlsx"].$el.getElementsByTagName("input")[0].click()},customRequest:function(t){var e=this,a=new FormData;a.append("file",t.file),Object(c["b"])(a).then((function(t){var a=t.code,i=t.message;0===a&&(e.$refs.table.refresh(),e.$message.success(i||"导入成功"))}))}}},C=T,S=Object(h["a"])(C,i,l,!1,null,"4f860db6",null);e["default"]=S.exports}}]);