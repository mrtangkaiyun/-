(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9e5bc9ca"],{"83be":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-header-wrapper",[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("search-bar",{ref:"searchbar",attrs:{data:t.searchData},on:{search:t.clickSearch}}),a("a-table",{attrs:{columns:t.columns,dataSource:t.table.data,rowKey:"id",size:t.table.size,loading:t.table.loading,pagination:t.pagination,scroll:{x:600}},on:{change:t.handleTabChange},scopedSlots:t._u([{key:"index",fn:function(e,a,i){return[t._v(" "+t._s(i+1)+" ")]}},{key:"action",fn:function(e,i){return a("span",{},[a("a-button",{attrs:{type:"primary",shape:"circle",icon:"form"},on:{click:function(e){return t.clickUpdate(i)}}}),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{type:"primary",shape:"circle",icon:"info"},on:{click:function(e){return t.clickDetail(i)}}})],1)}}])})],1)]),t.add.visiable?a("add",{attrs:{data:t.add.data},on:{add:t.refresh,edit:t.fetchData},model:{value:t.add.visiable,callback:function(e){t.$set(t.add,"visiable",e)},expression:"add.visiable"}}):t._e()],1)},n=[],r=(a("6a8e"),[{title:"序号",dataIndex:"index",width:80,scopedSlots:{customRender:"index"}},{title:"用户名",dataIndex:"name",width:120,key:"name"},{title:"用户编号(账号)",dataIndex:"number",width:120,key:"number"},{title:"角色",dataIndex:"roleName",width:100,key:"roleName"},{title:"操作",key:"action",fixed:"right",width:160,scopedSlots:{customRender:"action"}}]),o=[[{type:"input",key:"name",label:"账号",placeholder:"请输入账号"},{type:"search",name:"查询"},{type:"reset",name:"重置"}],[]],l=a("b775"),s="/skill/user";function c(t){return Object(l["b"])({url:"".concat(s,"/userList"),method:"get",params:t})}function d(t){return Object(l["b"])({url:"".concat(s,"/update"),method:"post",data:t})}var u=a("5ff1"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-modal",{staticClass:"page-modal",attrs:{afterClose:t.closeDialog,title:t.dialog.title,footer:null,keyboard:!1,maskClosable:!1,width:"700px"},model:{value:t.dialog.visiable,callback:function(e){t.$set(t.dialog,"visiable",e)},expression:"dialog.visiable"}},[a("a-tabs",{attrs:{"default-active-key":"1"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("a-tab-pane",{key:"1",attrs:{tab:"修改信息"}},[a("a-form-model",{ref:"form",attrs:{model:t.formInit,loading:"","label-col":{span:5},"wrapper-col":{span:18}}},[a("a-form-model-item",{attrs:{label:"（编号）账号",prop:"userName"}},[a("a-input",{attrs:{disabled:"",placeholder:"请输入"},model:{value:t.formInit.userName,callback:function(e){t.$set(t.formInit,"userName",e)},expression:"formInit.userName"}})],1),a("a-form-model-item",{attrs:{label:"角色",prop:"authority"}},[a("a-select",{attrs:{disabled:t.isDetail,placeholder:"请选择"},model:{value:t.formInit.authority,callback:function(e){t.$set(t.formInit,"authority",e)},expression:"formInit.authority"}},t._l(t.roleList,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.roleName}},[t._v(t._s(e.roleName))])})),1)],1),t.isDetail?t._e():a("div",{staticClass:"text-center"},[a("a-button",{on:{click:t.closeDialog}},[t._v(" 取消 ")]),a("a-button",{staticClass:"margin-l-20",attrs:{type:"primary",loading:t.button.loading},on:{click:t.handleSubmit}},[t._v("保存")])],1)],1)],1)],1)],1)],1)},f=[],b=a("5530"),p=a("ffcb"),h=a("4fb8"),v=a("cc5e"),g={mixins:[p["a"],h["a"]],data:function(){return{formInit:{authority:null,userName:null},active:"1",roleList:[]}},computed:{isDetail:function(){var t=this.data.type;return"detail"===t}},created:function(){var t=this.data,e=t.type,a=t.obj,i="edit"===e?"修改":"详情";this.$setKeyValue(this.dialog,{title:i,visiable:!0}),"edit"!==e&&"detail"!==e||(this.formInit.authority=a.roleName,this.formInit.userName=a.number,this.getRoleList())},methods:{getRoleList:function(){var t=this,e={pageNum:1,pageSize:100};Object(v["a"])(e).then((function(e){var a=e.code,i=e.data;0===a&&(t.roleList=i.rows)}))},handleSubmit:function(t){var e=this;t.preventDefault(),this.$refs.form.validate((function(t){if(t){var a=e.data,i=a.type,n=a.obj,r=Object(b["a"])({},e.formInit);"edit"===i&&(r.id=n.id),e.$setKeyValue(e.button,{loading:!0,text:"提交中"}),d(r).then((function(t){return e.process(t)}))}else e.$message.warning("请完善上面必填信息")}))}}},y=g,k=a("2877"),x=Object(k["a"])(y,m,f,!1,null,"1f707bdd",null),w=x.exports,I={name:"Account",mixins:[u["a"]],components:{Add:w},data:function(){return{columns:r,searchData:o}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.table.loading){var a=this.pagination,i=a.current,n=a.pageSize;e.pageNum=i,e.pageSize=n,this.table.loading=!0,c(e).then((function(e){var a=e.code,i=e.data;t.table.loading=!1,0===a&&(t.pagination.total=i.total,t.table.data=i.rows)}))}},clickDetail:function(t){this.$setKeyValue(this.add,{visiable:!0,data:{type:"detail",obj:t}})}}},_=I,D=Object(k["a"])(_,i,n,!1,null,"4f5dbf24",null);e["default"]=D.exports},cc5e:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return o}));var i=a("b775"),n="/skill/role";function r(t){return Object(i["b"])({url:"".concat(n,"/list"),method:"get",params:t})}function o(t){return Object(i["b"])({url:"".concat(n,"/update"),method:"post",data:t})}}}]);