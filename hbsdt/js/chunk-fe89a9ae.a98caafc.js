(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fe89a9ae"],{"21a3":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"f",(function(){return c})),a.d(t,"d",(function(){return d}));var i=a("b775"),l="/skill/masterAndApprentice";function n(e){return Object(i["b"])({url:"".concat(l,"/list"),method:"get",params:e})}function o(e){return Object(i["b"])({url:"".concat(l,"/deleteById"),method:"get",params:e})}function r(e){return Object(i["b"])({url:"".concat(l,"/importExcel"),method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}})}function s(e){return Object(i["b"])({url:"".concat(l,"/queryInfo?id=").concat(e),method:"get"})}function c(e){return Object(i["b"])({url:"".concat(l,"/update"),method:"post",data:e})}function d(e){return Object(i["b"])({url:"".concat(l,"/queryStuTea"),method:"get",params:e})}},e116:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-header-wrapper",[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("search-bar",{ref:"searchbar",attrs:{data:e.searchData},on:{search:e.clickSearch,import:e.importFile,add:e.clickAdd}}),a("a-table",{attrs:{columns:e.columns,dataSource:e.table.data,rowKey:"id",size:e.table.size,loading:e.table.loading,pagination:e.pagination,scroll:{x:900}},on:{change:e.handleTabChange},scopedSlots:e._u([{key:"index",fn:function(t,a,i){return[e._v(" "+e._s(i+1)+" ")]}},{key:"action",fn:function(t,i){return a("span",{},[a("a-button",{attrs:{type:"primary",shape:"circle",icon:"form"},on:{click:function(t){return e.clickUpdate(i)}}}),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{type:"primary",shape:"circle",icon:"menu"},on:{click:function(t){return e.clickListRecord(i)}}}),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{type:"primary",shape:"circle",icon:"info"},on:{click:function(t){return e.clickDetail(i)}}}),a("a-divider",{attrs:{type:"vertical"}}),a("popconfirm-button",{attrs:{custom:"",data:i},on:{click:e.clickDelete}},[a("a-button",{attrs:{type:"danger",shape:"circle",icon:"delete"}})],1)],1)}}])})],1)]),e.add.visiable?a("add",{attrs:{data:e.add.data},on:{add:e.refresh,edit:e.fetchData},model:{value:e.add.visiable,callback:function(t){e.$set(e.add,"visiable",t)},expression:"add.visiable"}}):e._e(),e.listObj.visiable?a("list-modal",{attrs:{data:e.listObj.data},on:{add:e.refresh,edit:e.fetchData},model:{value:e.listObj.visiable,callback:function(t){e.$set(e.listObj,"visiable",t)},expression:"listObj.visiable"}}):e._e(),a("a-upload",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"upxlsx",attrs:{name:"file",multiple:!0,customRequest:e.customRequest,accept:".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v("Click to Upload ")],1)],1)],1)},l=[],n=a("6a8e"),o=[{title:"序号",dataIndex:"index",width:80,scopedSlots:{customRender:"index"}},{title:"员工编号",dataIndex:"number",width:120,key:"number"},{title:"姓名",dataIndex:"name",width:100,key:"name"},{title:"所属单位",dataIndex:"companyName",width:160,key:"companyName"},{title:"学历",dataIndex:"education",width:100,key:"education"},{title:"专业技术资格",dataIndex:"technicalName",width:90,key:"technicalName"},{title:"技能等级名",dataIndex:"skillLevelName",width:120,key:"skillLevelName"},{title:"师徒状态",dataIndex:"state",width:120,key:"state"},{title:"操作",key:"action",fixed:"right",width:240,scopedSlots:{customRender:"action"}}],r=[[{type:"input",key:"name",label:"姓名",placeholder:"请输入姓名"},{type:"select",key:"company",label:"所属单位",placeholder:"请选择",options:n["c"]},{type:"select",key:"status",label:"师徒状态",placeholder:"请选择",options:[{label:"空闲 ",value:"1"},{label:"带徒中",value:"2"}]},{type:"search",name:"查询"},{type:"reset",name:"重置"}],[{type:"add",name:"新增"},{type:"import",name:"导入"}]],s=[{title:"序号",dataIndex:"index",width:80,scopedSlots:{customRender:"index"}},{title:"姓名",dataIndex:"name",width:80,key:"name"},{title:"所属单位",dataIndex:"companyName",width:120,key:"companyName"},{title:"学历",dataIndex:"education",width:80,key:"education"},{title:"配对日期",dataIndex:"foundTime",width:100,key:"foundTime"},{title:"师徒状态",dataIndex:"isGraduation",width:80,key:"isGraduation"}],c=a("21a3"),d=a("5ff1"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{staticClass:"page-modal",attrs:{afterClose:e.closeDialog,title:e.dialog.title,footer:null,keyboard:!1,maskClosable:!1,width:"800px"},model:{value:e.dialog.visiable,callback:function(t){e.$set(e.dialog,"visiable",t)},expression:"dialog.visiable"}},[a("div",[a("a-table",{attrs:{columns:e.columns,dataSource:e.table.data,rowKey:"id",size:e.table.size,loading:e.table.loading,scroll:{x:600}},scopedSlots:e._u([{key:"index",fn:function(t,a,i){return[e._v(" "+e._s(i+1)+" ")]}}])})],1)])],1)},m=[],p=a("ffcb"),f={mixins:[p["a"],d["a"]],data:function(){return{columns:s}},created:function(){var e="徒弟列表";this.$setKeyValue(this.dialog,{title:e,visiable:!0}),this.fetchInfo()},methods:{valueToLabelOption:n["i"],fetchInfo:function(){var e=this,t=this.data.obj,a={id:t.id,type:2};Object(c["d"])(a).then((function(t){var a=t.code,i=t.data;0===a&&(e.table.data=i)}))}}},b=f,h=a("2877"),v=Object(h["a"])(b,u,m,!1,null,"46e55dba",null),k=v.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{staticClass:"page-modal",attrs:{afterClose:e.closeDialog,title:e.dialog.title,footer:null,keyboard:!1,maskClosable:!1,width:"1300px"},model:{value:e.dialog.visiable,callback:function(t){e.$set(e.dialog,"visiable",t)},expression:"dialog.visiable"}},[a("a-form-model",{ref:"form",attrs:{model:e.formInit,loading:"","wrapper-col":{span:23}}},[a("a-row",[a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"员工编号",prop:"number",rules:e.rules.input}},[a("a-input",{attrs:{disabled:e.isDetail,placeholder:"请输入"},model:{value:e.formInit.number,callback:function(t){e.$set(e.formInit,"number",t)},expression:"formInit.number"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"姓名",prop:"name",rules:e.rules.input}},[a("a-input",{attrs:{disabled:e.isDetail,placeholder:"请输入"},model:{value:e.formInit.name,callback:function(t){e.$set(e.formInit,"name",t)},expression:"formInit.name"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"所属单位",prop:"company",rules:e.rules.select}},[a("a-select",{attrs:{disabled:e.isDetail,placeholder:"请选择"},model:{value:e.formInit.company,callback:function(t){e.$set(e.formInit,"company",t)},expression:"formInit.company"}},e._l(e.companyOptions,(function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"所属部门",prop:"departmentId"}},[a("a-input",{attrs:{disabled:e.isDetail,placeholder:"请输入"},model:{value:e.formInit.departmentId,callback:function(t){e.$set(e.formInit,"departmentId",t)},expression:"formInit.departmentId"}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"所属岗位",prop:"post"}},[a("a-input",{attrs:{disabled:e.isDetail,placeholder:"请输入"},model:{value:e.formInit.post,callback:function(t){e.$set(e.formInit,"post",t)},expression:"formInit.post"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"身份证号",prop:"idCard",rules:[{required:!1},{min:16,max:18,message:"身份证长度不正确"}]}},[a("a-input",{attrs:{disabled:e.isDetail,placeholder:"请输入"},model:{value:e.formInit.idCard,callback:function(t){e.$set(e.formInit,"idCard",t)},expression:"formInit.idCard"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"性别",prop:"sex"}},[a("a-select",{attrs:{disabled:e.isDetail,placeholder:"请选择"},model:{value:e.formInit.sex,callback:function(t){e.$set(e.formInit,"sex",t)},expression:"formInit.sex"}},e._l(e.sexOptions,(function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"民族",prop:"nation"}},[a("a-select",{attrs:{disabled:e.isDetail,placeholder:"请选择"},model:{value:e.formInit.nation,callback:function(t){e.$set(e.formInit,"nation",t)},expression:"formInit.nation"}},e._l(e.nationOptions,(function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"出生日期",prop:"birthday"}},[a("a-date-picker",{attrs:{disabled:e.isDetail},model:{value:e.formInit.birthday,callback:function(t){e.$set(e.formInit,"birthday",t)},expression:"formInit.birthday"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"政治面貌",prop:"politicalOutlook"}},[a("a-select",{attrs:{disabled:e.isDetail,placeholder:"请选择"},model:{value:e.formInit.politicalOutlook,callback:function(t){e.$set(e.formInit,"politicalOutlook",t)},expression:"formInit.politicalOutlook"}},e._l(e.faceOptions,(function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"学历",prop:"education",rules:e.rules.select}},[a("a-select",{attrs:{disabled:e.isDetail,placeholder:"请选择"},model:{value:e.formInit.education,callback:function(t){e.$set(e.formInit,"education",t)},expression:"formInit.education"}},e._l(e.recordOptions,(function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"手机",prop:"phone"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{disabled:e.isDetail,placeholder:"请输入",min:0},model:{value:e.formInit.phone,callback:function(t){e.$set(e.formInit,"phone",t)},expression:"formInit.phone"}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"电子邮箱",prop:"email"}},[a("a-input",{attrs:{disabled:e.isDetail,placeholder:"请输入"},model:{value:e.formInit.email,callback:function(t){e.$set(e.formInit,"email",t)},expression:"formInit.email"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"参加工作时间",prop:"workingTime"}},[a("a-date-picker",{attrs:{disabled:e.isDetail},model:{value:e.formInit.workingTime,callback:function(t){e.$set(e.formInit,"workingTime",t)},expression:"formInit.workingTime"}})],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"专业技术资格名称",prop:"technicalId"}},[a("a-select",{attrs:{disabled:e.isDetail,placeholder:"请选择"},model:{value:e.formInit.technicalId,callback:function(t){e.$set(e.formInit,"technicalId",t)},expression:"formInit.technicalId"}},e._l(e.cardOneOptions,(function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"技能等级名称",prop:"skillLevelId"}},[a("a-select",{attrs:{disabled:e.isDetail,placeholder:"请选择"},model:{value:e.formInit.skillLevelId,callback:function(t){e.$set(e.formInit,"skillLevelId",t)},expression:"formInit.skillLevelId"}},e._l(e.cardTwoOptions,(function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:6}},[a("a-form-model-item",{attrs:{label:"技其它资格名称",prop:"other"}},[a("a-input",{attrs:{disabled:e.isDetail,placeholder:"请输入"},model:{value:e.formInit.other,callback:function(t){e.$set(e.formInit,"other",t)},expression:"formInit.other"}})],1)],1)],1),e.isDetail?e._e():a("div",{staticClass:"text-center"},[a("a-button",{on:{click:e.closeDialog}},[e._v(" 取消 ")]),a("a-button",{staticClass:"margin-l-20",attrs:{type:"primary",loading:e.button.loading},on:{click:e.handleSubmit}},[e._v("保存")])],1)],1)],1)],1)},y=[],x=a("5530"),g=a("c1df"),w=a.n(g),O=a("4fb8"),D={mixins:[p["a"],O["a"]],data:function(){return{cardOneOptions:n["a"],cardTwoOptions:n["b"],companyOptions:n["c"],sexOptions:n["h"],nationOptions:n["f"],faceOptions:n["d"],recordOptions:n["g"],classOptions:[],formInit:{number:null,name:null,company:null,departmentId:null,post:null,idCard:null,sex:null,nation:null,birthday:null,politicalOutlook:null,education:null,phone:null,email:null,workingTime:null,technicalId:null,skillLevelId:null,other:null}}},computed:{isDetail:function(){var e=this.data.type;return"detail"===e}},created:function(){var e=this.data.type,t="add"===e?"师傅新增":"edit"===e?"师傅修改":"师傅详情";this.$setKeyValue(this.dialog,{title:t,visiable:!0}),"edit"!==e&&"detail"!==e||this.fetchInfo()},methods:{fetchInfo:function(){var e=this,t=this.data.obj;Object(c["c"])(t.id).then((function(t){var a=t.code,i=t.data;0===a&&(e.originalData=e.$copy(i),e.$setOriginalKV(e.formInit,i))}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.$refs.form.validate((function(e){if(e){var a=t.data,i=a.type,l=a.obj,n=Object(x["a"])({},t.formInit);if(n.birthday=w()(n.birthday).format("YYYY-MM-DD"),n.workingTime=w()(n.workingTime).format("YYYY-MM-DD"),"edit"===i&&t.$compareObjValue(t.originalData,n))return void t.$message.warning("数据没有任何修改");"edit"===i&&(n.id=l.id),t.$setKeyValue(t.button,{loading:!0,text:"提交中"}),Object(c["f"])(n).then((function(e){return t.process(e)}))}else t.$message.warning("请完善上面必填信息")}))}}},$=D,_=Object(h["a"])($,I,y,!1,null,"bce44090",null),j=_.exports,T={name:"Master",mixins:[d["a"]],components:{Add:j,ListModal:k},data:function(){return{columns:o,searchData:r,listObj:{visiable:!1,data:null}}},created:function(){this.fetchData()},methods:{valueToLabelOption:n["i"],fetchData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.table.loading){var a=this.pagination,i=a.current,l=a.pageSize;t.pageNum=i,t.pageSize=l,t.isType="师傅",this.table.loading=!0,Object(c["b"])(t).then((function(t){var a=t.code,i=t.data;e.table.loading=!1,0===a&&(e.pagination.total=i.total,e.table.data=i.rows)}))}},clickDelete:function(e){var t=this,a={id:e.id,number:e.number};Object(c["e"])(a).then((function(e){var a=e.code;0===a&&(t.$message.success("删除成功"),t.conditionPage(),t.fetchData(t.params))}))},clickDetail:function(e){this.$setKeyValue(this.add,{visiable:!0,data:{type:"detail",obj:e}})},clickListRecord:function(e){this.$setKeyValue(this.listObj,{visiable:!0,data:{type:"list",obj:e}})},importFile:function(){this.$refs["upxlsx"].$el.getElementsByTagName("input")[0].click()},customRequest:function(e){var t=this,a=new FormData;a.append("file",e.file),Object(c["a"])(a).then((function(e){var a=e.code,i=e.message;0===a&&(t.$refs.table.refresh(),t.$message.success(i||"导入成功"))}))}}},C=T,S=Object(h["a"])(C,i,l,!1,null,"4f860db6",null);t["default"]=S.exports}}]);